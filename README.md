# 自动化无限流量 VPN 系统说明

恭喜！您的自动化系统已经修复并完美运行。以下是该系统的工作原理以及客户端配置指南。

## 1. 项目工作逻辑 (云端工厂)

这个系统就像一个云端的“节点生产工厂”，全自动运行在 GitHub Actions 上：

1.  **触发 (Trigger)**: 每隔 1 小时 (Cron: `0 * * * *`)，GitHub Actions 会自动唤醒并运行 `vpn_refresher.py` 脚本。
2.  **注册与登录 (Register & Login)**:
    *   脚本生成一个随机的 `device_id` (模拟一台新手机)。
    *   使用这个 ID 向 VPN 服务商 API 发起注册/登录请求。
    *   **结果**: 获得一个新的账号，内含初始免费流量 (通常是 500MB)。
3.  **获取订阅 (Fetch Subscription)**:
    *   脚本请求订阅链接。
    *   **关键修复**: 如果域名被墙或禁止访问 (403 Forbidden)，脚本会自动切换到**直连 IP** (`159.138.8.160`) 进行下载。
    *   **解析**: 脚本下载订阅内容，并将其从 Base64 格式**解码**为真实的节点链接列表 (如 `vmess://...`, `trojan://...`)。
4.  **更新仓库 (Update Gist)**:
    *   脚本读取您 Gist 中的 `vpn_subs.txt`。
    *   将新获取的节点**插入到列表顶部**。
    *   **去重与轮替**: 确保没有重复节点，并只保留最新的 2000 个节点，旧节点会被自动挤出。
    *   最后将更新后的列表推送到 GitHub Gist。

## 2. 如何实现“云端流量永续”

*   **积少成多**: 虽然每个账号只有 500MB 流量，但脚本每小时跑一次，一天 24 次。
*   **流量池**: 您的 Gist 里维护着成百上千个节点。
    *   `24次/天 * 500MB = 12GB/天` 的可用流量储备。
    *   只要脚本在跑，新的满血节点就会源源不断地进入池子，用完的空节点会被挤到底部最终删除。
*   **永续**: 对您来说，这个 Gist 链接就是一个永远取之不尽的流量源。

## 3. Quantumult X 无感永续配置指南

要达到“无感”的效果，必须让 QX 自动剔除坏节点并切换到好节点。

### 第一步：添加资源 (已完成)
您已经成功添加了 Gist 链接作为“引用资源”。
*   **注意**: 确保在资源设置中开启 **自动更新** (建议选 12 小时或更短，虽然 QX 限制了最短时间，但我们主要靠策略组来切换)。

### 第二步：建立自动测速策略组 (核心)
这是实现“无感”的关键。

1.  进入 QX **设置** -> **策略组**。
2.  点击右上角 `+` 添加。
3.  **名称**: 填 `Auto-Pool` (或者您喜欢的名字)。
4.  **类型 (Type)**: 选择 **url-latency-benchmark** (自动测速选择)。
5.  **策略 (Policy)**: 这里**不要**去点击下面的加号一个个选节点。
6.  **关键步骤**: 找到 **"需匹配的资源标签" (Resource Tag)** 这一栏。
    *   在里面填写您第一步添加资源时设置的 **标签名称** (例如 `Auto-50GB` 或 `Gist-Pool`)。
    *   这样 QX 就会自动把该资源下的所有节点都纳入这个策略组。
7.  **高级参数 (非常重要)**:
    *   **URL**: 默认的 `http://www.gstatic.com/generate_204` 即可。
    *   **Interval (间隔)**: 填 `300` (秒)。表示每 5 分钟测速一次。
    *   **Tolerance (容差)**: 填 `50` (ms)。
7.  保存。

### 第三步：将 Auto-Pool 加入到主策略组 (关键)
您现在的 **"全球加速" (PROXY)** 策略组里可能只有节点资源，没有 `Auto-Pool` 这个策略。您需要把它加进去。

1.  进入 QX **设置** -> **策略组 (Policy Groups)**。
2.  找到您的 **"全球加速"** (或者 **"PROXY"**) 策略组。
3.  点击进入编辑模式。
4.  向下滚动，找到 **"策略" (Policy)** 部分（或者点击 `+` 号添加策略）。
5.  在弹出的列表中，勾选 **`Auto-Pool`**。
6.  **保存**。

### 第四步：选择 Auto-Pool
1.  回到 QX 主页 (节点列表)。
2.  点击 **"全球加速"** (PROXY)。
3.  现在列表里应该能看到 **`Auto-Pool`** 了。
4.  **勾选它**。

### 最终效果
*   **全球加速** -> 指向 -> **Auto-Pool** -> 自动指向 -> **Gist-Pool 中延迟最低的节点**。
*   当当前节点流量耗尽断网时，`Auto-Pool` 会在几秒钟内自动切换到下一个好节点，您几乎感觉不到。
*   建议开启 **后台自动更新** (Background Update) 以保持 Gist 节点列表新鲜。
