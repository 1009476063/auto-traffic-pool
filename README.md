# Auto Traffic Pool (自动化流量池)

这是一个全自动化的 VPN 节点获取与维护系统，旨在通过 GitHub Actions 持续获取免费 VPN 流量，并构建一个高质量、自动轮替的节点池。配合 Quantumult X 等客户端，可实现“永久免费、无感切换”的上网体验。

## ✨ 项目特性 (Features)

*   **☁️ 云端全自动运行**: 基于 GitHub Actions，无需本地服务器，每小时自动执行。
*   **🔄 自动注册与获取**: 模拟真实设备，自动向 VPN 服务商注册新账号并提取订阅链接。
*   **🛡️ 智能抗封锁**:
    *   **IP 直连**: 自动绕过域名污染/DNS 劫持，直接通过 IP 获取订阅。
    *   **User-Agent 轮替**: 随机模拟多种客户端 (Shadowrocket, v2rayNG 等) 绕过 WAF 拦截。
*   **🧹 智能清洗与过滤**:
    *   **🚫 深度关键词过滤**: 自动剔除包含 "香港", "HK", "免费", "Free", "套餐到期", "长期有效" 等关键词的节点。
    *   **⚡️ 全量连通性检测**: 每次更新时，不仅检测新节点，还会**重新检测 Gist 中所有存量节点**。
    *   **🔒 SSL 握手验证**: 对于 TLS 节点（Trojan/VLESS/VMess TLS），执行真实的 SSL 握手，有效剔除端口开放但服务失效的节点。
    *   **♻️ 自动淘汰**: 流量耗尽或失效的旧节点会被自动剔除，确保池内节点 100% 可用。
*   **📦 容量管理**: 自动维护 Gist 列表，保留最新的 400 个高质量节点。

## 🛠 工作原理 (How it Works)

1.  **触发**: GitHub Actions 定时任务 (Cron) 唤醒脚本。
2.  **生产**: 脚本生成随机 Device ID，向目标 VPN API 发起注册请求，获得含 500MB 流量的新账号。
3.  **提取**: 获取订阅链接，若域名被墙，自动切换至直连 IP 下载。
4.  **清洗**:
    *   解码 Base64 订阅内容。
    *   **过滤**: 深度扫描节点名称，剔除 "HK", "免费", "套餐到期" 等无效或提示性节点。
    *   **全量测速**: 使用多线程并行技术，对新获取的节点 + Gist 中已有的所有节点进行检测。
    *   **深度验证**: 
        *   **TCP 握手**: 基础连通性。
        *   **SSL 握手**: 针对 TLS 节点验证证书握手，确保服务真实可用（比单纯 TCP 更精准）。
    *   **优胜劣汰**: 任何无法连接的节点（包括刚获取的坏节点或已失效的老节点）都会被直接丢弃。
5.  **发布**: 将清洗后的优质节点列表（最多 400 个）推送到云端。

## 🚀 使用指南 (Usage)

### 1. 客户端配置 (Quantumult X)

要实现“无感永续”，请严格按照以下步骤配置：

#### 第一步：添加资源
在 QX 中添加您的 Gist 原始链接 (Raw URL) 作为引用资源。
*   **标签**: 建议命名为 `Auto-Pool`。
*   **自动更新**: 开启，建议设置为 12 小时。

#### 第二步：创建自动测速策略
1.  进入 **策略组 (Policy Groups)** -> 添加。
2.  **名称**: `Auto-Pool`。
3.  **类型**: 选择 `url-latency-benchmark` (自动测速)。
4.  **资源标签 (Resource Tag)**: 填写第一步的标签名 (如 `Auto-Pool`)。
    *   *注意：不要手动勾选下面的节点，直接填标签名让它自动匹配。*
5.  **高级参数**:
    *   Check Interval: `300` (5分钟)
    *   Tolerance: `50` (ms)

#### 第三步：应用策略
1.  找到您的主代理策略 (如 `Proxy` 或 `全球加速`)。
2.  编辑它，将 **策略 (Policy)** 中的 `Auto-Pool` 勾选并保存。
3.  在主页将主策略切换为 `Auto-Pool`。

**效果**: 当当前节点失效时，QX 会自动从 `Auto-Pool` 中寻找下一个延迟最低的节点进行连接，实现无感切换。

### 2. 部署 (Fork & Run)

如果您想自己部署一套：

1.  **Fork** 本仓库。
2.  创建一个 **GitHub Gist** (文件名如 `vpn_subs.txt`)。
3.  在仓库 **Settings -> Secrets and variables -> Actions** 中添加：
    *   `GIST_ID`: 您的 Gist ID (URL 最后那串字符)。
    *   `GIST_TOKEN`: 具有 Gist 读写权限的 GitHub Token。
4.  启用 GitHub Actions (默认可能是禁用的)。
5.  手动运行一次 `Run Auto-Sub Script` workflow 进行测试。

---

**免责声明**: 本项目仅供技术研究与学习交流，请勿用于非法用途。
